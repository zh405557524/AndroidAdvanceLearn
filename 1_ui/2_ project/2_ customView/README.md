# 自定义View

## 自定义控件

* 自绘控件

  ~~~java
  这个view上所展示的内容全部都是我们自己绘制出来的。绘制的代码是写在onDraw()方法中。通常自绘控件直接继承自View(实现例子：卡片，动画展示)
  ~~~

  

* 组合控件 

  ~~~java
  我们并不需要自己去绘制视图上显示内容，而只是用系统原生的控件就好了，但我们可以将几个系统原生的控件组合一起，这样创建出的控件被称为组合控件。
  ~~~

  

* 继承控件

  ~~~java
  我们并不需要自己重头去实现一个控件，只需要去继承一个现有的控件，然后在这个控件上增加一些新的功能，就可以形成 一个自定义的控件了。这种自定义控件的特点就是不仅能够按照我们的需求加入相应的功能，还可以保留原生控件的所有功能。
  ~~~

  

* 事件类控件

  ~~~java
  通常需要处理触摸事件，并且会消费事件。大多数事件类控件需要结合重绘方法来进行，可以给用户的手指有一个良好的反馈。如：刮刮乐。
  ~~~

  

* 容器类控件

  ~~~java
  容器类控件一般指 为实现具体的需求 而开发的自定义容器。如 百分比布局，流式布局都是为实现具体摆放的容器类控件，一般实现容器类控件 需要继承五大布局即可。如果满足不了的可以自定义实现。
  ~~~

  

## 手写recyclerViwe

* recyclerView 架构中核心组件 

  - 回收池:能回收任意item控件，并返回符合类型的item控件；比如 onBInderViewHodler方法中的第一个参数是从回收池返回的。

  - 适配器:Adapter接口，经常辅助RecyclerView现实列表展示；适配器模式，将用户界面展示与交互分离。

  - recyclerView：是做触摸事件的交互，主要实现边界值判断;根据用户的触摸反馈，协调回收池对象与适配器对象之间的工作。

    

* recyclerView的架构实现
  - 加载
  - 滑动
  - 架构:充分利用传送带原理，只有用户看到的数据才会加载到内存，而看不到的在等待被加载。传送带能够源源不断的传送亿级货物，RecyclerView也能够显示加载亿级item。
  - 传送带的工作机制可以比作生产者与消费者模式。

* recyclerVIew的代码设计

  - 代码(需要重写自定义的方法)
    - onLayout
    - onMeasure
    - onInterceptTouchEvent
    - onTouchEvent
    - srcollyBy
  - 成员变量
    * List<View> viewlist: 缓存已经加载到屏幕上的View 这些View不存在回收池中，需要集合表示，方便后续查找和移除
    * int curentY:: 记录在Y轴上滑动的距离
    * int rowCount:记录在RecyClerView加载的总数据，比如1w条
    * int firstRow:: 记录在屏幕中第一个View在数据内容中的位置，比如目前是第34个元素在屏幕的 一个位置。
    * REcycler recycler:: 持有一个回收池的引用
    * int srollY: RecyclerView中第一个VIew的左上顶点力离屏幕的距离
  - 1
  - 2
  - 3

  























